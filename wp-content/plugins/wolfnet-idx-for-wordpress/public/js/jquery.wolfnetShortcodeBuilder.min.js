"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),jQuery(function(a){var b="wolfnetShortcodeBuilder",c="wolfnetShortcodeBuilder_",d="WolfNet Shortcode Builder",e=null,f=null,g=null,h=null,i={agent:{title:"Agent Pages",action:"wolfnet_scb_options_agent",shortcode:"wnt_agent"},feat:{title:"Featured Listings",action:"wolfnet_scb_options_featured",shortcode:"wnt_featured"},grid:{title:"Listing Grid",action:"wolfnet_scb_options_grid",shortcode:"wnt_grid"},list:{title:"Property List",action:"wolfnet_scb_options_list",shortcode:"wnt_list"},srch:{title:"Quick Search",action:"wolfnet_scb_options_quicksearch",shortcode:"wnt_search"}},j=function(b){null!=e&&"jQuery"==typeof e||(e=a("<div>").dialog({modal:!0,autoOpen:!1,height:600,width:600,title:d,close:function(){m("menu"),e.find("form").trigger("reset")},dialogClass:"true"==b.useDialogClass?"wolfnet_dialog":""}),k(),l())},k=function(){a.ajax({url:ajaxurl,type:"GET",dataType:"json",async:!1,data:{action:"wolfnet_scb_showagentfeature"},success:function(a){0==a&&delete i.agent}});var b="";for(var d in i)b+='<button class="button" style="display:block;width:75%;margin: 0px auto 10px auto;" ',b+='wolfnet:id="'+d+'"',b+=">",b+=i[d].title,b+="</button>";g=a('<div id="'+c+'menu"/>').append(b).appendTo(e),a('<button id="'+c+'back" class="button">Back</button>').prependTo(e).hide().click(function(){m("menu")}),g.find("button").click(function(){var b=a(this),c=b.attr("wolfnet:id");m(c)})},l=function(){h=a('<div id="'+c+'loader" />').hide().appendTo(e).css({position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"white",opacity:.5}),a('<img src="'+wolfnet_ajax.loaderimg+'" />').appendTo(h).css({display:"block",position:"absolute",left:"49%",top:"49%"})},m=function(a){0==e.find("div#"+c+a).length&&n(a),g.hide(),"menu"!=a?(e.find("button#"+c+"back").show(),e.dialog({title:d+" - "+i[a].title})):(e.find("button#"+c+"back").hide(),e.dialog({title:d})),g=e.find("div#"+c+a).show(),g.find(".modeField input").trigger("ready")},n=function(b){var d=a('<div id="'+c+b+'"/>').appendTo(e).hide();a.ajax({url:ajaxurl,data:{action:i[b].action},success:function(c){var e=a("<form />").attr("wolfnet:sc",i[b].shortcode).append(c).append(a('<button type="submit" class="button button-primary"><span class="wnt-icon wnt-icon-checkmark"></span> Insert Shortcode</button>')).submit(function(a){return a.preventDefault(),o.call(e),!1}).appendTo(d);switch(wolfnet.initMoreInfo(e.find(".wolfnet_moreInfo")),b){case"grid":case"list":e.wolfnetListingGridControls();break;case"feat":e.wolfnetFeaturedListingsControls()}},beforeSend:function(){h.show()},complete:function(){h.hide()}})},o=function(){q.call(this,function(a){null!=f&&f.execCommand("mceInsertContent",!1,a),e.dialog("close")})},p=function(){return this.value},q=function(b){var c=this,d={},e="["+c.attr("wolfnet:sc")+" /]",f=["mode","savedsearch","criteria"],g=c.find('input[type="radio"][name="mode"][value="advanced"]:first:checked'),i=c.find('select[name="savedsearch"]:first');c.find("input, select").each(function(){var b=this,e=a(b);if(""!==b.name&&a.inArray(b.name,f)===-1)switch(b.type){default:""!==b.value.trim()&&(d[b.name]=b.value.trim());break;case"checkbox":if(!d.hasOwnProperty(b.name))if(b.checked===!0){var g=c.find('input[type="checkbox"][name="'+b.name+'"]:checked');d[b.name]=g.map(p).get().join(",")}else b.hasAttribute("data-fallback-value")&&(d[b.name]=b.getAttribute("data-fallback-value"));break;case"radio":b.checked===!0?d[b.name]=e.val():b.hasAttribute("data-fallback-value")&&(d[b.name]=b.getAttribute("data-fallback-value"))}}),0!==g.length&&0!==i.length?(delete d.zipcode,delete d.city,delete d.minprice,delete d.maxprice,a.ajax({url:ajaxurl,type:"GET",dataType:"json",data:{action:"wolfnet_scb_savedsearch",id:i.val()},success:function(a){for(var c in a)d[c]=a[c];r(d,e,b)},beforeSend:function(){h.show()},complete:function(){h.hide()}})):r(d,e,b)},r=function(a,b,c){for(var d in a)b=b.replace("/]"," "+d+'="'+a[d]+'" /]');c(b)},s={init:function(b){var c={useDialogClass:!0};a.extend(c,b||{}),loaderUri=c.loaderUri||null,j(c)},open:function(a){e.dialog("open"),f=a||window.tineyMCE||null}};a.fn[b]=function(c){return s[c]?s[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist in jQuery."+b):s.init.apply(this,arguments)},a(document).wolfnetShortcodeBuilder({useDialogClass:wolfnet_ajax.useDialogClass||"true"})});
//# sourceMappingURL=jquery.wolfnetShortcodeBuilder.min.js.map